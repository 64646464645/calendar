{"version":3,"file":"reminder.js","sources":["utils/reminder.js"],"sourcesContent":["// 由于uniapp中没有浏览器的setTimeout功能，我们简化提醒功能\r\n// 在真实应用中，应该由服务端处理提醒功能\r\n\r\nlet reminderTimers = [];\r\n\r\nfunction unitToMs(unit) {\r\n  return { m: 60000, h: 3600000, d: 86400000 }[unit];\r\n}\r\n\r\n// 在uniapp中，提醒功能会有所简化，主要用于演示\r\nexport function scheduleReminders(events) {\r\n  // 清除之前的定时器\r\n  reminderTimers.forEach(timer => clearInterval(timer));\r\n  reminderTimers = [];\r\n\r\n  /*\r\n  const now = Date.now();\r\n  events.forEach(event => {\r\n    if (!event.reminder || !event._id) return;\r\n\r\n    const start = new Date(event.startTime).getTime();\r\n    const delay = start - event.reminder.value * unitToMs(event.reminder.unit) - now;\r\n\r\n    if (delay > 0) {\r\n      const timer = setTimeout(() => {\r\n        uni.showToast({\r\n          title: `【提醒】${event.title} 即将开始`,\r\n          icon: 'none',\r\n          duration: 3000\r\n        });\r\n      }, delay);\r\n      reminderTimers.push(timer);\r\n    }\r\n  });\r\n  */\r\n}\r\n\r\nexport function scheduleSingleReminder(event) {\r\n  if (event._id) scheduleReminders([event]);\r\n}\r\n\r\nexport function cancelReminder(eventId) {\r\n  // 简化处理\r\n}\r\n\r\nexport function clearAllReminders() {\r\n  reminderTimers.forEach(timer => clearInterval(timer));\r\n  reminderTimers = [];\r\n}"],"names":[],"mappings":";AAGA,IAAI,iBAAiB,CAAA;AAOd,SAAS,kBAAkB,QAAQ;AAExC,iBAAe,QAAQ,WAAS,cAAc,KAAK,CAAC;AACpD,mBAAiB,CAAA;AAsBnB;AAEO,SAAS,uBAAuB,OAAO;AAC5C,MAAI,MAAM;AAAK,sBAAyB;AAC1C;;;"}